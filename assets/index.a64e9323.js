import{u as O,a as G,c as f,b as V,d as F,e as T,f as x,r as m,j as l,g as z,h as w,i as k,R as j,k as B,P}from"./vendor.c73fb681.js";const S=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerpolicy&&(c.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?c.credentials="include":s.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(s){if(s.ep)return;s.ep=!0;const c=n(s);fetch(s.href,c)}};S();const C=()=>O(),g=G;function N(e,t){const n=Array.of();for(let r=0;r<e;r++)typeof t=="function"?n.push(t(r,n)):n.push(t);return n}var i;(function(e){e.INIT="init",e.PLAYING="playing",e.WON="won",e.LOST="lost"})(i||(i={}));var o;(function(e){e.HIDDEN="hidden",e.REVEALED="revealed",e.FLAGGED="flagged",e.MINE_REVEALED="mine_revealed",e.MINE_EXPLODED="mine_exploded",e.MINE_CORRECT_FLAGGED="mine_correct_flagged",e.MINE_INCORRECT_FLAGGED="mine_incorrect_flagged"})(o||(o={}));function L(e,t){const n=t.rows*t.columns,r=e<t.columns,s=e>=n-t.columns,c=e%t.columns==0,a=e%t.columns==t.columns-1;return[...c?[]:[e-1],...a?[]:[e+1],...r?[]:[e-t.columns],...!r&&!c?[e-t.columns-1]:[],...!r&&!a?[e-t.columns+1]:[],...s?[]:[e+t.columns],...!s&&!c?[e+t.columns-1]:[],...!s&&!a?[e+t.columns+1]:[]]}const _=f("minesweeper/REVEAL_CELL"),D=e=>(t,n)=>{t(_(e));const r=n().minesweeper,s=r.cells[e];if(!s.mine&&s.neigboringMines===0){const c=r.ids.indexOf(e),a=L(c,r.board);for(const u of a){const p=r.ids[u],v=r.cells[p];!v.revealed&&!v.flagged&&t(D(p))}}},M=f("minesweeper/FLAG_CELL"),y=f("minesweeper/UNFLAG_CELL"),b=f("minesweeper/RESET");var $=V(A(),{[_.type]:(e,t)=>{const n=e.cells[t.payload];n.flagged=!1,n.revealed=!0,n.mine&&(e.state=i.LOST)},[M.type]:(e,t)=>{const n=e.cells[t.payload];n.flagged=!0;const r=Object.values(e.cells).filter(c=>c.mine),s=Object.values(e.cells).filter(c=>c.flagged);r.every(c=>c.flagged)&&r.length===s.length&&(e.state=i.WON)},[y.type]:(e,t)=>{const n=e.cells[t.payload];n.flagged=!1},[b.type]:()=>A()});function A(){const e={rows:9,columns:9},t=H(e);return{state:i.INIT,board:e,ids:t.map(n=>n.id),cells:Object.fromEntries(t.map(n=>[n.id,n]))}}function H(e){const t=e.rows*e.columns,n=N(t,s=>({id:s,flagged:!1,revealed:!1,mine:!1,neigboringMines:0})),r=W(e.columns,t-1);for(const s of r){n[s].mine=!0;const c=L(s,e);for(const a of c)n[a].neigboringMines+=1}return n}function W(e,t){return N(e,(n,r)=>{let s;do s=Math.floor(Math.random()*t);while(r.includes(s));return s})}const h=e=>e.minesweeper,X=e=>h(e).state,q=e=>h(e).board,K=e=>h(e).ids,I=e=>t=>h(t).cells[e],U=e=>F(X,I(e),(t,n)=>{const{flagged:r,revealed:s,mine:c}=n;if(t===i.WON||t===i.LOST)switch(!0){case(r&&c):return o.MINE_CORRECT_FLAGGED;case(r&&!c):return o.MINE_INCORRECT_FLAGGED;case(s&&c):return o.MINE_EXPLODED;case c:return o.MINE_REVEALED;default:return o.REVEALED}switch(!0){case(s&&!c):return o.REVEALED;case r:return o.FLAGGED;default:return o.HIDDEN}}),Y=T({reducer:{minesweeper:$}});var J="te0htw7",Q="te0htw4",Z="te0htw0",d=x({defaultClassName:"te0htw9",variantClassNames:{state:{revealed:"te0htwa",mine_revealed:"te0htwb",mine_exploded:"te0htwc",mine_correct_flagged:"te0htwd",mine_incorrect_flagged:"te0htwe",flagged:"te0htwf",hidden:"te0htwg"},count:{"0":"te0htwh","1":"te0htwi","2":"te0htwj","3":"te0htwk","4":"te0htwl","5":"te0htwm","6":"te0htwn","7":"te0htwo","8":"te0htwp"}},defaultVariants:{},compoundVariants:[]}),ee="te0htw8",te="te0htw5",E="te0htwq",ne="te0htw6",se={columnCount:"var(--te0htw1)",cellSize:"var(--te0htw2)",gap:"var(--te0htw3)"};function ce({id:e}){const t=C(),n=g(U(e)),{neigboringMines:r}=g(I(e)),s=m.exports.useCallback(()=>t(D(e)),[t,e]),c=m.exports.useCallback(u=>{u.preventDefault(),t(M(e))},[t,e]),a=m.exports.useCallback(u=>{u.preventDefault(),t(y(e))},[t,e]);switch(n){case o.REVEALED:return l("div",{className:d({state:n,count:r}),children:r});case o.MINE_REVEALED:case o.MINE_EXPLODED:return l("div",{className:d({state:n}),children:l("div",{className:E,children:re})});case o.MINE_CORRECT_FLAGGED:case o.MINE_INCORRECT_FLAGGED:return l("div",{className:d({state:n}),children:l("div",{className:E,children:R})});case o.FLAGGED:return l("button",{className:d({state:n}),onClick:a,onContextMenu:a,children:l("div",{className:E,children:R})});default:return l("button",{className:d({state:o.HIDDEN}),onClick:s,onContextMenu:c})}}const R=l("svg",{xmlns:"http://www.w3.org/2000/svg","aria-label":"flag",focusable:"false",role:"img",viewBox:"0 0 512 512",children:l("path",{fill:"currentColor",d:"M336.174 80c-49.132 0-93.305-32-161.913-32-31.301 0-58.303 6.482-80.721 15.168a48.04 48.04 0 0 0 2.142-20.727C93.067 19.575 74.167 1.594 51.201.104 23.242-1.71 0 20.431 0 48c0 17.764 9.657 33.262 24 41.562V496c0 8.837 7.163 16 16 16h16c8.837 0 16-7.163 16-16v-83.443C109.869 395.28 143.259 384 199.826 384c49.132 0 93.305 32 161.913 32 58.479 0 101.972-22.617 128.548-39.981C503.846 367.161 512 352.051 512 335.855V95.937c0-34.459-35.264-57.768-66.904-44.117C409.193 67.309 371.641 80 336.174 80zM464 336c-21.783 15.412-60.824 32-102.261 32-59.945 0-102.002-32-161.913-32-43.361 0-96.379 9.403-127.826 24V128c21.784-15.412 60.824-32 102.261-32 59.945 0 102.002 32 161.913 32 43.271 0 96.32-17.366 127.826-32v240z"})}),re=l("svg",{xmlns:"http://www.w3.org/2000/svg","aria-label":"bomb",focusable:"false",role:"img",viewBox:"0 0 512 512",children:l("path",{fill:"currentColor",d:"M440.5 88.5l-52 52L415 167c9.4 9.4 9.4 24.6 0 33.9l-17.4 17.4c11.8 26.1 18.4 55.1 18.4 85.6 0 114.9-93.1 208-208 208S0 418.9 0 304 93.1 96 208 96c30.5 0 59.5 6.6 85.6 18.4L311 97c9.4-9.4 24.6-9.4 33.9 0l26.5 26.5 52-52 17.1 17zM500 60h-24c-6.6 0-12 5.4-12 12s5.4 12 12 12h24c6.6 0 12-5.4 12-12s-5.4-12-12-12zM440 0c-6.6 0-12 5.4-12 12v24c0 6.6 5.4 12 12 12s12-5.4 12-12V12c0-6.6-5.4-12-12-12zm33.9 55l17-17c4.7-4.7 4.7-12.3 0-17-4.7-4.7-12.3-4.7-17 0l-17 17c-4.7 4.7-4.7 12.3 0 17 4.8 4.7 12.4 4.7 17 0zm-67.8 0c4.7 4.7 12.3 4.7 17 0 4.7-4.7 4.7-12.3 0-17l-17-17c-4.7-4.7-12.3-4.7-17 0-4.7 4.7-4.7 12.3 0 17l17 17zm67.8 34c-4.7-4.7-12.3-4.7-17 0-4.7 4.7-4.7 12.3 0 17l17 17c4.7 4.7 12.3 4.7 17 0 4.7-4.7 4.7-12.3 0-17l-17-17zM112 272c0-35.3 28.7-64 64-64 8.8 0 16-7.2 16-16s-7.2-16-16-16c-52.9 0-96 43.1-96 96 0 8.8 7.2 16 16 16s16-7.2 16-16z"})});function le(){const{columns:e}=g(q),t=g(K);return l("div",{className:ee,style:z({[se.columnCount]:`${e}`}),children:t.map(n=>l(ce,{id:n},n))})}function oe(){const e=C(),t=m.exports.useCallback(()=>e(b()),[e]);return w("div",{className:k(Z,Q),children:[l(le,{}),l("div",{className:J}),w("div",{className:te,children:[l("h1",{children:"Minesweeper"}),l("button",{className:ne,onClick:t,children:"Reset"})]})]})}function ae(){return l(oe,{})}j.render(l(B.StrictMode,{children:l(P,{store:Y,children:l(ae,{})})}),document.getElementById("root"));
